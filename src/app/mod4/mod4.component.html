<button mat-fab style="margin: 5px" color="basic" (click)="openDialog()">
  <mat-icon>add</mat-icon>
</button>
<button mat-fab style="margin: 5px" color="warn" (click)="refresh()">
  <mat-icon>refresh</mat-icon>
</button>
<mat-table *ngIf="dataSource" [dataSource]="dataSource" multiTemplateDataRows>
  <ng-container matColumnDef="number">
    <th mat-header-cell *matHeaderCellDef>id</th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("number").value }}
    </td>
  </ng-container>

  <ng-container matColumnDef="state">
    <th mat-header-cell *matHeaderCellDef>Статус обращения</th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("state").value }}
    </td>
  </ng-container>

  <ng-container matColumnDef="created">
    <th mat-header-cell *matHeaderCellDef>Дата и время создания</th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("created").value }}
    </td>
  </ng-container>

  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef>Название</th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("title").value }}
    </td>
  </ng-container>

  <ng-container matColumnDef="url">
    <th mat-header-cell *matHeaderCellDef>ссылка на issues in github</th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("url").value }}
    </td>
  </ng-container>

  <ng-container matColumnDef="link">
    <th mat-header-cell *matHeaderCellDef>
      имя и ссылка на профиль пользователя<br />
      создавшего обращение
    </th>
    <td mat-cell *matCellDef="let element">
      {{ element.get("link").value }}
      <button
        mat-fab
        style="margin: 5px"
        color="basic"
        (click)="replayDialog(element.value.number)"
      >
        <mat-icon>replay</mat-icon>
      </button>
    </td>
  </ng-container>
  <form [formGroup]="form">
    <ng-container matColumnDef="expandedDetail">
      <td
        mat-cell
        *matCellDef="let element"
        [formGroup]="element"
        [attr.colspan]="displayedColumns.length"
      >
        <div
          class="example-element-detail"
          [@detailExpand]="
            element == expandedElement ? 'expanded' : 'collapsed'
          "
        >
          <div class="example-element-weight">
            <mat-form-field appearance="outline">
              <input matInput type="text" formControlName="body"
            /></mat-form-field>
          </div>
        </div>
      </td>
    </ng-container>
  </form>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    mat-row
    *matRowDef="let element; columns: displayedColumns"
    class="example-element-row"
    [class.example-expanded-row]="expandedElement === element"
    (click)="expandedElement = expandedElement === element ? null : element"
  ></tr>
  <tr
    mat-row
    *matRowDef="let row; columns: ['expandedDetail']"
    class="example-detail-row"
  ></tr>
</mat-table>
